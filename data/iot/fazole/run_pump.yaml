    id: run_pump${n}
    mode: parallel
    max_runs: 1
    then:
      - wait_until:
         - switch.is_off: pump1
         - switch.is_off: pump2
         - switch.is_off: pump3
         - switch.is_off: pump4
      - number.set:
          id: last_pump_ts${n}
          value: !lambda |-
            return id($clock).utcnow().timestamp;
      - switch.turn_on: pump${n}
      - delay: 10s
      - switch.turn_off: pump${n}
      - delay: 1000s
