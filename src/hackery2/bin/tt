#!/usr/bin/env python3
import sys

arg = sys.argv[1]
if arg == 'on':
	action = 'on'
	misc = ''
elif arg == 'off':
	action = 'off'
	misc = ''
else:
	action = 'desc'
	misc = arg
	
import psycopg2
conn = psycopg2.connect("dbname=hours user=hours password=hours")
sql = """INSERT INTO hours(ts,action,misc) VALUES(CURRENT_TIMESTAMP, %s, %s);"""
try:
	cur = conn.cursor()
	cur.execute(sql, (action, misc))
	conn.commit()
	cur.close()
except (Exception, psycopg2.DatabaseError) as error:
	print(error)
finally:
	if conn is not None:
		conn.close()
